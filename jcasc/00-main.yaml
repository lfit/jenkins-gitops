---
jenkins:
  # System Message - Custom message displayed on all Jenkins pages.
  # Value is supplied by Helm; defaults to empty if not specified in values.yaml for this deployment.
  systemMessage: '{{.Values.jenkinsCore.systemMessage | default ""}}'

  # Number of executors - Number of builds master can run concurrently.
  numExecutors: 0

  # Quiet period - Seconds to wait before starting a build after a trigger.
  quietPeriod: 5

  # SCM checkout retry count - Number of SCM checkout retries on failure.
  scmCheckoutRetryCount: 0

  # Jenkins Location - Jenkins URL and administrator email.
  location:
    url: "{{.Values.jenkinsCore.location.url}}"
    adminAddress: "{{.Values.jenkinsCore.location.adminAddress}}"

  # Default View - Name of the primary view Jenkins shows on the main page.
  primaryView: "00-empty"

  # Usage - How Jenkins master schedules builds.
  mode: EXCLUSIVE

  # Labels - Space-separated labels for the Jenkins master node.
  labelString: "{{.Values.jenkinsCore.masterLabels | default ""}}"

  # Restrict project naming - Defines the job naming strategy.
  projectNamingStrategy:
    strategy: "hudson.model.JobNamingStrategy$DefaultNamingStrategy"
    forceExistingJobs: false

  # Resource Root URL - URL for static Jenkins resources if served from a different location.
  resourceRootURL: "{{.Values.jenkinsCore.resourceRootURL | default ""}}"

  # Telemetry (Usage Statistics) - Jenkins anonymous usage statistics collection.
  telemetry:
    usageStatisticsCollected: false

  # Update Center - Disable deferred wipeout of /tmp and /cache on an agent.
  disableDeferredWipeout: "{{.Values.jenkinsCore.disableDeferredWipeout | default false}}"

  # SCM Polling - Global SCM polling configuration.
  pollSCM:
    pollThreadCount: "{{.Values.jenkinsCore.scmPolling.pollThreadCount | default 10}}"

  # Pipeline Durability Level - Global default durability setting for Pipelines.
  pipelineDurability:
    defaultDurability: NONE

  {{- if .Values.jenkinsCore.proxy.enabled }}
  proxy:
    name: "{{.Values.jenkinsCore.proxy.host}}"
    port: {{.Values.jenkinsCore.proxy.port}}
    userName: "{{.Values.jenkinsCore.proxy.username | default ""}}"
    noProxyHost: "{{.Values.jenkinsCore.proxy.noProxy | default ""}}"
  {{- end }}

  {{- if .Values.jenkinsCore.fingerprintConfig.enabled }}
  fingerprintConfig:
    fingerprintStorage: "{{.Values.jenkinsCore.fingerprintConfig.storage | default "never"}}"
    fingerprintCleanupPeriod: {{.Values.jenkinsCore.fingerprintConfig.cleanupPeriod | default 24}}
  {{- end }}

  {{- if .Values.jenkinsCore.administrativeMonitors }}
  administrativeMonitors:
    {{- range .Values.jenkinsCore.administrativeMonitors }}
    - disabled: "{{. | quote}}"
    {{- end }}
  {{- end }}

  {{- if .Values.jenkinsCore.mailer.enabled }}
  mailer:
    smtpHost: "{{.Values.jenkinsCore.mailer.smtpHost}}"
    smtpPort: {{.Values.jenkinsCore.mailer.smtpPort | default 25}}
    useSsl: {{.Values.jenkinsCore.mailer.useSsl | default false}}
    useTls: {{.Values.jenkinsCore.mailer.useTls | default false}}
    smtpAuthUserName: "{{.Values.jenkinsCore.mailer.smtpUsername | default ""}}"
    defaultSuffix: "{{.Values.jenkinsCore.mailer.defaultSuffix | default ""}}"
    charset: "{{.Values.jenkinsCore.mailer.charset | default "UTF-8"}}"
  {{- end }}
