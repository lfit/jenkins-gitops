---
# jcasc/06-credentials.yaml
#
# Jenkins credential configurations for secure access to external services.
# Credentials are managed through Jenkins credential store and
# 1Password integration.
#
# onepassword-integration: Service account authentication for 1Password access
# github-token: GitHub Personal Access Token retrieved from 1Password via JCasC
#
# Build secrets (GitHub tokens) are retrieved directly from 1Password
# during builds.
# Cluster secrets (admin passwords) are managed separately via
# External Secrets Operator.
#
# This content moved to jenkins-config in staging/values.yaml
# systemMessage configuration consolidates with other jenkins: sections

# GitHub Credentials Configuration
# Status: Ready for production use
# Service Account: opensearch-jenkins (existing)
# Token: github-opensearch-jenkins with repo, public_repo, repo:status permissions
# Expiration: June 2, 2026
credentials:
  system:
    domainCredentials:
      - credentials:
          # 1Password Service Account Integration
          - string:
              id: "onepassword-service-account"
              description: "1Password service account token for secret access"
              # Service account token from K8s secret via environment variable
              secret: "${ONEPASSWORD_SA_TOKEN}"

          # GitHub Service Account Token for CI/CD Operations
          - string:
              id: "${GITHUB_CREDENTIALS_ID:-github-token}"
              description: "GitHub opensearch-jenkins service account token (opensearch-jenkins-github-token)"
              # ESO-managed credential from 1Password via environment variable
              secret: "${OPENSEARCH_GITHUB_TOKEN}"
